"use strict";angular.module("vagrantlistApp",["vagrantlistApp.services","vagrantlistApp.filters","vagrantlistApp.directives","ui.bootstrap","rzModule","ngResource","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/list.html",controller:"ListController"}).when("/suggest",{templateUrl:"views/suggest.html",controller:"SuggestController"}).otherwise({redirectTo:"/"})}]),angular.module("vagrantlistApp").controller("MenuController",["$scope",function(a){a.current_active=0,a.items=[{text:"Boxes",route:"/",active:!0},{text:"Suggest a box",route:"/suggest",active:!1}],a.click=function(b){a.items[a.current_active].active=!1,a.items[b].active=!0,a.current_active=b}}]),angular.module("vagrantlistApp").controller("ListController",["$scope","$http","BoxDistributions","VagrantBoxes","BoxArchitectures","BoxProviders",function(a,b,c,d,e,f){a.boxes=[],a.distributions={},a.architectures={},a.providers={},a.size={floor:0,ceil:3e3,min:0,max:0};var g=function(b){a.architectures.hasOwnProperty(b)||(a.architectures[b]={name:b,show:!0})},h=function(b){var c=b.slug;a.distributions.hasOwnProperty(c)||(a.distributions[c]=b,a.distributions[c].show=!0)},i=function(b){a.providers.hasOwnProperty(b)||(a.providers[b]={name:b,show:!0})},j=function(b){for(var c=[],d=0;d<b.length;d++)c.push(parseInt(b[d].size));a.size.min=Math.min.apply(Math,c),a.size.max=Math.max.apply(Math,c)};a.isBoxVisible=function(b,c,d,e){var f=Math.min(a.size.min,a.size.max),g=Math.max(a.size.min,a.size.max);return a.distributions[b].show&&a.architectures[c].show&&a.providers[d].show&&e>=f&&g>=e},c.getDistros().then(function(a){for(var b=0;b<a.length;b++)h(a[b])}),e.getArchitectures().then(function(a){for(var b=0;b<a.length;b++)g(a[b])}),f.getProviders().then(function(a){for(var b=0;b<a.length;b++)i(a[b])}),d.getBoxes().then(function(b){a.boxes=b,j(b)})}]),angular.module("vagrantlistApp").controller("TableController",["$scope",function(a){var b=-1;a.onClick=function(a){b=b==a?-1:a},a.isInfoVisible=function(a){return b==a}}]),angular.module("vagrantlistApp").controller("SuggestController",["$scope","BoxDistributions","VagrantBoxes","BoxArchitectures","BoxProviders","BoxTemplate",function(a,b,c,d,e,f){a.distributions=[],a.selected_distro={name:"Others",slug:"others"},a.architectures={},a.providers={},a.json=f,a.$watch("architectures",function(){for(var b in a.architectures)b.show&&(a.json.architecture=b.name)},!0),d.getArchitectures().then(function(b){for(var c=0;c<b.length;c++){var d=b[c];a.architectures[d]={name:d,show:!1}}}),e.getProviders().then(function(b){for(var c=0;c<b.length;c++){var d=b[c];a.providers[d]={name:d,show:!1}}}),b.getDistros().then(function(b){for(var c=0;c<b.length;c++){{b[c].slug}a.distributions[c]=b[c]}}),a.setDistro=function(a){console.log(a)}}]);var services=angular.module("vagrantlistApp.services",["ngResource"]);services.factory("BoxDistributions",["$q","$http",function(a,b){var c=function(){var c=a.defer();return b.get("boxes/_distributions.json",{cache:!0}).success(function(a){c.resolve(a)}),c.promise};return{getDistros:c}}]),services.factory("VagrantBoxes",["$q","$http","BoxDistributions",function(a,b,c){var d=function(){var d=0,e=[],f=a.defer();return c.getDistros().then(function(a){for(var c=0;c<a.length;c++){var g=a[c].slug;b.get("boxes/"+g+".json",{cache:!0}).success(function(b){return function(c){for(var g=0;g<c.length;g++){var h=c[g];h.distribution=b,e.push(h)}d++,d==a.length&&f.resolve(e)}}(a[c]))}}),f.promise};return{getBoxes:d}}]),services.factory("BoxArchitectures",["$q","$http","VagrantBoxes",function(a,b,c){var d=function(){var b=[],d=a.defer();return c.getBoxes().then(function(a){for(var c=0;c<a.length;c++){var e=a[c];-1==b.indexOf(e.architecture)&&b.push(e.architecture),d.resolve(b)}}),d.promise};return{getArchitectures:d}}]),services.factory("BoxProviders",["$q","$http","VagrantBoxes",function(a,b,c){var d=function(){var b=[],d=a.defer();return c.getBoxes().then(function(a){for(var c=0;c<a.length;c++){var e=a[c];-1==b.indexOf(e.provider)&&b.push(e.provider),d.resolve(b)}}),d.promise};return{getProviders:d}}]),services.factory("BoxTemplate",function(){return{name:"",url:"",architecture:"",version:{name:"",number:""},provider:"",size:"",features:{guest_additions:!1,vmware_tools:!1,puppet:!1,chef:!1,webserver:{apache:!1,lighttpd:!1,nginx:!1},interpreters:{ruby:!1,php:!1,python:!1},database:{mysql:!1,mongodb:!1},vcs:{git:!1,svn:!1,hg:!1}},source:"",comment:""}});var directives=angular.module("vagrantlistApp.directives",[]);directives.directive("picker",["$compile","$timeout",function(a,b){return function(a,c){b(function(){jQuery(c).closest("select").selectpicker("refresh")},200)}}]),directives.directive("directive2",["$compile",function(){return function(){console.log("postlink2")}}]);var filters=angular.module("vagrantlistApp.filters",[]);filters.filter("bracesIfNotEmpty",function(){var a=function(a){var b="";return 0!=a.length&&(b="("+a+")"),b};return a}),filters.filter("fileSize",function(){var a=function(a){var b="";return b=parseInt(a)<1e3?a+" MB":"~"+a/1e3+" GB"};return a});